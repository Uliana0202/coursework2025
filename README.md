# –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã –≤–µ–¥–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–æ–≤ —Å–æ–±—ã—Ç–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –°–£–ë–î Clickhouse

## –ü–∞–ø–∫–∞ data
### –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö –ª–æ–≥–æ–≤ —Å–æ–±—ã—Ç–∏–π (generate_data.py)
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –ª–æ–≥–æ–≤ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–∏—Å—Ç–µ–º –∞–Ω–∞–ª–∏—Ç–∏–∫–∏. –°–æ–∑–¥–∞–µ—Ç CSV-—Ñ–∞–π–ª —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ –¥–µ–π—Å—Ç–≤–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ.

#### üîç –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (–ª–æ–≥–∏–Ω—ã, –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏, —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è)
- –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
- –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
- –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  
#### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
NUM_RECORDS = 3000  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
START_DATE = datetime(2000, 1, 1)  # –ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞
END_DATE = datetime(2024, 12, 31)  # –ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞
CSV_FILE = 'logs_data_3_000.csv'  # –ò–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
```

#### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
–ü–æ–ª–µ         |	–¢–∏–ø	    |–û–ø–∏—Å–∞–Ω–∏–µ
-------------|----------|---------------------------------|
timestamp	   |datetime	|–í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è
login        |string	  |Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
event	       |string	  |–¢–∏–ø —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'login')
subsystem	   |string	  |–ü–æ–¥—Å–∏—Å—Ç–µ–º–∞, –≥–¥–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å–æ–±—ã—Ç–∏–µ
comment      |string	  |–¢–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
description  |string    |–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è

#### üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞:
- generate_logins() - —Å–æ–∑–¥–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö email-–∞–¥—Ä–µ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- generate_events() - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 100 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π
- generate_subsystems() - —Å–æ–∑–¥–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Å–∏—Å—Ç–µ–º —Å–∏—Å—Ç–µ–º—ã
- generate_comments() - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Å–æ–±—ã—Ç–∏—è–º
- generate_descriptions() - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è
- random_timestamp() - —Å–æ–∑–¥–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é –º–µ—Ç–∫—É –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ

#### üìä –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
```
timestamp,login,event,subsystem,comment,description
2021-05-12 14:32:45,user42@gmail.com,login_success,auth,"User user42@gmail.com performed login_success in auth","Successful completion of login"
2020-11-03 09:12:22,user17@company.org,export_complete,reporting_backend,"Action export_complete completed successfully in reporting_backend","System event: export_complete"
```

## –ü–∞–ø–∫–∞ queries_select
###  –ú–æ–¥—É–ª—å generate_select_query.py

#### üîç –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
#### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
#### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
#### üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
#### üìä –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö


## –ú–æ–¥—É–ª—å generate_select_query.py
SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–∏–∫–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —É—Å–ª–æ–≤–∏–π WHERE –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤.

#### üîç –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π - —Å–æ–∑–¥–∞–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–æ—á–µ—Ç–∞–Ω–∏—è —É—Å–ª–æ–≤–∏–π (–æ—Ç –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –¥–æ –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤)
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ WHERE-–∫–ª–∞—É–∑ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —É—Å–ª–æ–≤–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –°–ª—É—á–∞–π–Ω—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –º–µ–∂–¥—É AND/OR –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π
- –ì–∏–±–∫–∏–µ —à–∞–±–ª–æ–Ω—ã —É—Å–ª–æ–≤–∏–π - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã SQL-—É—Å–ª–æ–≤–∏–π (LIKE, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∞—Ç)
- –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ —Ñ–∞–π–ª queries.txt

#### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```
attributes = {
    'timestamp': "timestamp <= '2012-11-21'",  # –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ
    'login': "login LIKE 'user10%'",          # –§–∏–ª—å—Ç—Ä –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
    'event': "event LIKE 'session%'",         # –§–∏–ª—å—Ç—Ä –ø–æ —Å–æ–±—ã—Ç–∏—è–º
    'subsystem': "subsystem LIKE 'b%'"        # –§–∏–ª—å—Ç—Ä –ø–æ –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞–º
}
```
#### üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (–æ—Ç 1 –¥–æ 4 –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ)
2. –î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏:
  - –°–æ–∑–¥–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —É—Å–ª–æ–≤–∏–π WHERE
  - –°–ª—É—á–∞–π–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã AND/OR –º–µ–∂–¥—É —É—Å–ª–æ–≤–∏—è–º–∏
  - –§–æ—Ä–º–∏—Ä—É–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π SQL-–∑–∞–ø—Ä–æ—Å
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤ —Ñ–∞–π–ª queries.txt
4. –í—ã–≤–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å—ã –≤ –∫–æ–Ω—Å–æ–ª—å —Å –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π

#### üìä –ü—Ä–∏–º–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
```
-- –û–¥–∏–Ω–æ—á–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ
SELECT count(*) FROM table_name WHERE subsystem LIKE 'b%';

-- –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —É—Å–ª–æ–≤–∏–π —Å AND
SELECT count(*) FROM table_name WHERE login LIKE 'user10%' AND event LIKE 'session%';

-- –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —É—Å–ª–æ–≤–∏–π —Å OR
SELECT count(*) FROM table_name WHERE timestamp <= '2012-11-21' OR subsystem LIKE 'b%';
```


